<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lấy Mã Bypass</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
    <div class="bg-white p-8 rounded-lg shadow-lg w-full max-w-md">
        <h1 class="text-2xl font-bold mb-6 text-center text-gray-800">Lấy Mã Bypass</h1>
        <div class="mb-4">
            <label for="type" class="block text-sm font-medium text-gray-700 mb-2">Chọn loại:</label>
            <select id="type" class="mt-1 block w-full p-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                <option value="">Chọn loại</option>
                <option value="m88">m88</option>
                <option value="fb88">fb88</option>
                <option value="188bet">188bet</option>
                <option value="w88">w88</option>
                <option value="v9bet">v9bet</option>
                <option value="bk8">bk8</option>
            </select>
        </div>
        <button onclick="getCode()" class="w-full bg-blue-500 text-white p-2 rounded-md hover:bg-blue-600 transition duration-200">Lấy Mã</button>
        <p id="status" class="mt-4 text-center text-gray-600"></p>
        <div class="mt-4 flex items-center">
            <input type="text" id="code" class="block w-full p-2 border border-gray-300 rounded-md" readonly placeholder="Mã sẽ xuất hiện ở đây">
            <button id="copyBtn" onclick="copyCode()" class="ml-2 bg-gray-200 text-gray-700 p-2 rounded-md hover:bg-gray-300 transition duration-200" disabled>Sao chép</button>
        </div>
        <p class="mt-4 text-center text-sm text-gray-500">Website thuộc về nguy3nlong</p>
    </div>

    <script>
        async function getCode() {
            const config = {
                'm88': {
                    codexn: 'taodeptrai',
                    url: 'https://bet88ec.com/cach-danh-bai-sam-loc',
                    loai_traffic: 'https://bet88ec.com/'
                },
                'fb88': {
                    codexn: 'taodeptrai',
                    url: 'https://fb88mg.com/ty-le-cuoc-hong-kong-la-gi',
                    loai_traffic: 'https://fb88mg.com/'
                },
                '188bet': {
                    codexn: 'taodeptrailamnhe',
                    url: 'https://88betag.com/cach-choi-game-bai-pok-deng',
                    loai_traffic: 'https://88betag.com/'
                },
                'w88': {
                    codexn: 'taodeptrai',
                    url: 'https://188.166.185.213/tim-hieu-khai-niem-3-bet-trong-poker-la-gi',
                    loai_traffic: 'https://188.166.185.213/'
                },
                'v9bet': {
                    codexn: 'taodeptrai',
                    url: 'https://v9betse.com/ca-cuoc-dua-cho',
                    loai_traffic: 'https://v9betse.com/'
                },
                'bk8': {
                    codexn: 'taodeptrai',
                    url: 'https://bk8ze.com/cach-choi-bai-catte',
                    loai_traffic: 'https://bk8ze.com/'
                }
            };

            const type = document.getElementById('type').value.trim().toLowerCase();
            const status = document.getElementById('status');
            const codeInput = document.getElementById('code');
            const copyBtn = document.getElementById('copyBtn');

            if (!type || !config[type]) {
                status.textContent = 'Vui lòng chọn loại hợp lệ: m88, fb88, 188bet, w88, v9bet, hoặc bk8';
                status.classList.remove('text-green-500', 'text-blue-500');
                status.classList.add('text-red-500');
                codeInput.value = '';
                copyBtn.disabled = true;
                return;
            }

            status.textContent = 'Đang lấy mã, vui lòng chờ (~80s)...';
            status.classList.remove('text-red-500', 'text-green-500');
            status.classList.add('text-blue-500');
            codeInput.value = '';
            copyBtn.disabled = true;

            try {
                const response = await fetch('https://traffic-user.net/GET_MA.php', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    },
                    body: new URLSearchParams({
                        codexn: config[type].codexn,
                        url: config[type].url,
                        loai_traffic: config[type].loai_traffic,
                        clk: '1000'
                    })
                });

                if (!response.ok) {
                    status.textContent = `Không thể lấy mã từ server. Mã trạng thái: ${response.status}`;
                    status.classList.remove('text-blue-500', 'text-green-500');
                    status.classList.add('text-red-500');
                    console.log('Phản hồi từ server:', await response.text());
                    return;
                }

                const html = await response.text();
                const match = html.match(/<span id="layma_me_vuatraffic"[^>]*>\s*(\d+)\s*<\/span>/);
                
                if (match) {
                    const code = match[1];
                    status.textContent = 'Lấy mã thành công!';
                    status.classList.remove('text-blue-500', 'text-red-500');
                    status.classList.add('text-green-500');
                    codeInput.value = code;
                    copyBtn.disabled = false;
                } else {
                    status.textContent = 'Không thể trích xuất mã từ phản hồi';
                    status.classList.remove('text-blue-500', 'text-green-500');
                    status.classList.add('text-red-500');
                    console.log('Phản hồi từ server:', html);
                }
            } catch (error) {
                status.textContent = `Lỗi mạng: ${error.message}`;
                status.classList.remove('text-blue-500', 'text-green-500');
                status.classList.add('text-red-500');
                console.log('Lỗi:', error.message);
            }
        }

        function copyCode() {
            const codeInput = document.getElementById('code');
            codeInput.select();
            document.execCommand('copy');
            const status = document.getElementById('status');
            status.textContent = 'Đã sao chép mã!';
            status.classList.remove('text-red-500', 'text-blue-500');
            status.classList.add('text-green-500');
        }
    </script>
</body>
</html>
